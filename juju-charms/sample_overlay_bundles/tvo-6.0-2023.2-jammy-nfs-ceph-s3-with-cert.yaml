series: jammy
variables:
  openstack-origin: &openstack-origin distro
  triliovault-pkg-source: &pkg-source       "deb [trusted=yes] https://apt.fury.io/trilio-maint-5-2 /"

machines:
  '1':
  '2':
  '3':
  '4':

applications:
  trilio-data-mover:
    charm: trilio-charmers-trilio-data-mover
    channel: 6.0/stable
    revision: 21
    options:
      triliovault-pkg-source: *pkg-source
      trilio-backup-targets: >
        [
          {
            "backup-target-name": "S3_BT1",
            "backup-target-type": "s3",
            "is-default": true,
            "s3-type": "other_s3",
            "s3-access-key": "",
            "s3-secret-key": "",
            "s3-region-name": "",
            "s3-bucket": "",
            "s3-endpoint-url": "",
            "s3-signature-version": "default",
            "s3-auth-version": "DEFAULT",
            "s3-ssl-enabled": true,
            "s3-ssl-verify": true,
            "s3-self-signed-cert": true,
            "s3-ssl-ca_cert": "-----BEGIN CERTIFICATE-----\ndsfwTCCA92gAwIBAgICEAAwDQYJKoZIhvcNAQsdadBQAwgZAxCzAJBgNVBAYTAklO\nMQswCQYDVQQIDAJNSDENMAsGA1UEBwwEUFVORTEPMA0GA1UECgwGVFJJTElPMQsw\nCQYDVQQLDAJJVDEaMBgGA1UEAwwRKi50cmlsaW9kYXRhLmRlbW8xKzApBgkqhkiG\n9w0BCQEWHHByYXNoYW50LnNha2hhcmthckB0cmlsaW8uaW8wHhcNMTkwNjEzMDkx\nNDE5WhcNMjkwNjEwMDkxNDE5WjCBgTELMAkGA1UEBhMCSU4xCzAJBgNVBAgMAk1I\nMQ8wDQYDVQQKDAZUUklMSU8xCzAJBgNVBAsMAklUMRowGAYDVQQDDBEqLnRyaWxp\nb2RhdGEuZGVtbzErMCkGCSqGSIb3DQEJARYccHJhc2hhbnQuc2FraGFya2FyQHRy\naWxpby5pbzCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAK0NE9RKKcaI\nKy/2vI5AaKXITNU/UvSI9bQtwpNM2Pg0k3k0osM3FajJpjpNhQBh4ulheYWRdTPU\nEtMwOyALXOew9dq60k48fBRhnowal6Aan/afuJjaNEhRleiL0H9j0/io/fAnDl5N\nB7oYC/W8LGoqUjmoUe5fZIIADNOHbuD7K2YsR9Z3hQogDTp5u4azrla9/zQZAL4J\ns2xbDdjpz5fhdCs14nVH/EJAA1Yu9CI41L5C2VDrT2ieOCkt/FrN+FN1Edjm1KHZ\nqm70TCcQLEljrioKBMRnjNsnOfw+xuqr4CD0UBfGlpEQPt3+gagEIkJkzPQZppsz\n60MMX0cidVhLToz2dpVXwuqTJyvXpN0uMtPo5QoAtH/kVQwdNO48V57MWQgllrfQ\nISKn2nZ3uLSq4R7EyzEQIlAUlFaJw5UJDNFpI6R3faShUG+kJXdXibjey2JjpdN3\n1/CHJ3C2yVQR4zoBMPR7r5tlexdGUa228e+/gadFl/aY4ESAbXiJpG4jZGc7lAmd\n1Y4JHhjayiJhtKj8cgO0KDuna+Pxh+RkWAyO7nOUMfRqY7QuDMapM6d/dMetZbz4\nyMTPZWQi317HZ1racD0omr/siCS0JCbjjedpyz85yYnqKLE08gW9uB3p6gzdVtxN\nn8BaVyPtjbuezFUNFfkGS5MRuVYc6B9LAgMBAAGjZjBkMB0GA1UdDgQWBBS9u6Ea\n2J0Z3PKsZ6CLETBxMQV8jjAfBgNVHSMEGDAWgBTMI6hSlcDMBNJZH9huHeUWWU2s\n9jASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIBhjANBgkqhkiG9w0B\nAQsFAAOCAgEAjb0+EdZFnNHKvo0LhFHGqncCzv+O0X8uWtgHAx0p304sMWyOV2qe\ntHFiZtJ47M8Ru3jE82kL6Wxieich7N9s+CrdXJXR2Eh6loJDtNBP8nQIUTTIGSqe\nWnf4sqn2bw2puIA6C0D0PKPvq4BFt7Br/pxfRJ4fN3ksr9LtBqhy0qcfMmhC6qsb\njhWCROZwBnTXHcd65d1Np9mRnFTXemARX8x5EX7uNVq3wT93emfi37OkxZMRq9xK\nCMzZKuKZ2TGAprfAftba9upZmEN9rlWXT4mgEA29qebt2/Vn+QAA06BLY4dyPIgn\nrrRx5ogdRRsw3uStksc0ef1Nk/nGQEI+NcG/ZTV0fltf6c4SIMysQ/qDIshCUe5P\ntfypBO/kzNcseiZA6jGyVSGrKmSwjoyRdH7aT2PnymOMZ5Joce8jxD2TjrnieG0W\n63/p02qR48w2qkd3We+W1S4o2cZaS//o4xr4mxG6+/p9f8ubIDzfctS53hprQpmu\nEFxzSP2PPURazefDXy9nmxjHv3QjrBDc9qqI6KhnegGETB+Aio+EEKA/0npLDtF1\nSPHgaFG27p1UqRJNS+H7S9C0jXCEjZPNIfn4P42JGiCl8tFAXRBcHI5+7FiRGaGz\nrwg2KJfv9Rg3Z32y7lrIdgbqEsyYove0d6TpQACp2VRRXjn+H0l1yc8=\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIGCDCCA/CgAwIBAgIJAIKsMAZuH8qDMA0GCSqGSIb3DQEBCwUAMIGQMQswCQYD\nVQQGEwJJTjELMAkGA1UECAwCTUgxDTALBgNVBAcMBFBVTkUxDzANBgNVBAoMBlRS\nSUxJTzELMAkGA1UECwwCSVQxGjAYBgNVBAMMESoudHJpbGlvZGF0YS5kZW1vMSsw\nKQYJKoZIhvcNAQkBFhxwcmFzaGFudC5zYWtoYXJrYXJAdHJpbGlvLmlvMB4XDTE5\nMDYxMzA4NTQyOFoXDTM5MDYwODA4NTQyOFowgZAxCzAJBgNVBAYTAklOMQswCQYD\nVQQIDAJNSDENMAsGA1UEBwwEUFVORTEPMA0GA1UECgwGVFJJTElPMQswCQYDVQQL\nDAJJVDEaMBgGA1UEAwwRKi50cmlsaW9kYXRhLmRlbW8xKzApBgkqhkiG9w0BCQEW\nHHByYXNoYW50LnNha2hhcmthckB0cmlsaW8uaW8wggIiMA0GCSqGSIb3DQEBAQUA\nA4ICDwAwggIKAoICAQDUQzq9ki4L5/QhgJtyUQXTli/WyYlXF6TqYbVUkl/N4AE0\nQkfwAPFz+wWW3WDY1xAUIuQMkmf8V4SnCA+zD9cQvTCsB4ScBejknvQiV275o9TH\nDCyUxRuuVDTQ9q0tLQUOLa4RH/ytbVwdQ9+G1jU3elqQfGCpQwO9ZCHSXwypmVJW\nplgRqrq1FGx2fjgchTawSIrE0E2Wtd4rUaYG+jx6gD3TnrzDuapsTSaBjyc9bJRm\neEJvkde/q8G94qaxuAk+UQelYoR+Pk1JSS8OILloG6R5TQJQf5o4DEmvZbv/kaCi\nAA7e6kyYhZ8dT1gi8ux965c1fIDZH1e4Qm30KCbJ6pGYfaQq9UlzZLggH+EFbXQM\nrGZwWomckCIIKumWNFFtJ9BpirMjm4TjhNZnS9EmjUQC41eBX/3bvj5QnG1PnnPA\n87CnKJEXlTEWVtdz3G+XuH4qvbeW/pmV4hpQ/lmkidVMNIfYtnTcW0Qd7HG4oczb\nBETjCibFyMJndyIhJDTmvhrEEfLmJbm4P2OZ6Yjb+yd+eqJJhcCvfS31J6Ex2kMb\nxJD9MOygDrtdjLUSlpVdJTA6eSEHgbGUDoBv5wPe/bxot8ccdGyWj5Ch5EGUxJRQ\n3ZvsmNq2e8y0rIa/MDh4MICNSNM+lVoEYeaeuqLN+Ml18yZQLy/mf44C2A5OxQID\nAQABo2MwYTAdBgNVHQ4EFgQUzCOoUpXAzATSWR/Ybh3lFllNrPYwHwYDVR0jBBgw\nFoAUzCOoUpXAzATSWR/Ybh3lFllNrPYwDwYDVR0TAQH/BAUwAwEB/zAOBgNVHQ8B\nAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAMX4TVDmrT9NzkmKh6Pnn6jX7lft\nlpU+WewMMs97Vdwd8lnAn9lpBP9q0xyAVtJpmcPVHc6NlQBazf5nqhx2u9/LUPNP\nzdYRz7X/xu71ePzX7UCh+s4kftf/Hokwi4jF/QtnmRvFRp7Y8+OIEf0sz6jkW552\nhj43UTFDLpYWdfCNeBH+j9RjzWJHKdvRwEPzpmYp/KbgBagerp8BSQqEBc7sQMXw\nr0Wyip3FaKEon+NMMavrFnNcQALMG68IZf4CnF9X2MSUMTfZj86KiPcpwbbfSRwU\nRFL7Ia7uX9+UxewAJdcjNVpERhTHu0ucFA5Ea56sLK/nd5kg5Or1d5noeTODhAFu\nSAcT3yblzxoXoV1+pvm7PslMVWd+P/zxwucaLb4ll5BZWml7xZAgc/KIwnkyU+Yg\nyX//RN8REGUAPYsi0LkrOAJubmI1Tbr8cgmsxG2kCPMyoyKpM3AociW7mHneu6EX\nPIiLWm87o+dbeoPNibTkNBqN6uGpHGxspEma/r87fUiMsjj75NxvGw8D+NpynOIf\nD6tmcLSXaJrZ+PXkX2iqss+iM4Y5FHWHlTVcqZ4kcrqNcOtO0SUtpZKCk7uZVJpa\nmQiHr3IX9CMfGAgHOZUjske9gzz5vihg5ASrCLShdwifWrFqqdhwjMHEFVU+A+84Yg4\n+BWLC6odansebs\n-----END CERTIFICATE-----\n",
            "s3-bucket-object-lock-enabled": false
          },
          {
            "backup-target-name": "NFS_BT3",
            "backup-target-type": "nfs",
            "is-default": false,
            "nfs-shares": "192.2.1.33:/var/nsfshare1",
            "nfs-options": "nolock,soft,timeo=600,intr,lookupcache=none,nfsvers=3,retrans=10"
          }
        ]
      verbose: True
  trilio-data-mover-mysql-router:
    charm: mysql-router
  trilio-dm-api:
    charm: trilio-charmers-trilio-dm-api
    channel: 6.0/stable
    revision: 17
    num_units: 1
    options:
       triliovault-pkg-source: *pkg-source
       openstack-origin: *openstack-origin
    to:
      - 'lxd:1'
  trilio-dm-api-mysql-router:
    charm: mysql-router
  trilio-horizon-plugin:
    charm: trilio-charmers-trilio-horizon-plugin
    channel: 6.0/stable
    revision: 10
    options:
       triliovault-pkg-source: *pkg-source
       openstack-encryption-support: True
  trilio-wlm-mysql-router:
    charm: mysql-router
  trilio-wlm:
    charm: trilio-charmers-trilio-wlm
    channel: 6.0/stable
    revision: 17
    num_units: 1
    options:
      triliovault-pkg-source: *pkg-source
      openstack-origin: *openstack-origin
      trilio-backup-targets: >
        [
          {
            "backup-target-name": "S3_BT1",
            "backup-target-type": "s3",
            "is-default": true,
            "s3-type": "other_s3",
            "s3-access-key": "",
            "s3-secret-key": "",
            "s3-region-name": "us-east-1",
            "s3-bucket": "",
            "s3-endpoint-url": "",
            "s3-signature-version": "default",
            "s3-auth-version": "DEFAULT",
            "s3-ssl-enabled": true,
            "s3-ssl-verify": true,
            "s3-self-signed-cert": true,
            "s3-ssl-ca_cert": ""-----BEGIN CERTIFICATE-----\ndghF9TCCA92gAwdjkAgICEAAwDQYJKoZIhvcNAQELBQAwgZAxCzAJBgNVBAYTAklO\nMQswCQYDVQQIDAJNSDENMAsGA1UEBwwEUFVORTEPMA0GA1UECgwGVFJJTElPMQsw\nCQYDVQQLDAJJVDEaMBgGA1UEAwwRKi50cmlsaW9kYXRhLmRlbW8xKzApBgkqhkiG\n9w0BCQEWHHByYXNoYW50LnNha2hhcmthckB0cmlsaW8uaW8wHhcNMTkwNjEzMDkx\nNDE5WhcNMjkwNjEwMDkxNDE5WjCBgTELMAkGA1UEBhMCSU4xCzAJBgNVBAgMAk1I\nMQ8wDQYDVQQKDAZUUklMSU8xCzAJBgNVBAsMAklUMRowGAYDVQQDDBEqLnRyaWxp\nb2RhdGEuZGVtbzErMCkGCSqGSIb3DQEJARYccHJhc2hhbnQuc2FraGFya2FyQHRy\naWxpby5pbzCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAK0NE9RKKcaI\nKy/2vI5AaKXITNU/UvSI9bQtwpNM2Pg0k3k0osM3FajJpjpNhQBh4ulheYWRdTPU\nEtMwOyALXOew9dq60k48fBRhnowal6Aan/afuJjaNEhRleiL0H9j0/io/fAnDl5N\nB7oYC/W8LGoqUjmoUe5fZIIADNOHbuD7K2YsR9Z3hQogDTp5u4azrla9/zQZAL4J\ns2xbDdjpz5fhdCs14nVH/EJAA1Yu9CI41L5C2VDrT2ieOCkt/FrN+FN1Edjm1KHZ\nqm70TCcQLEljrioKBMRnjNsnOfw+xuqr4CD0UBfGlpEQPt3+gagEIkJkzPQZppsz\n60MMX0cidVhLToz2dpVXwuqTJyvXpN0uMtPo5QoAtH/kVQwdNO48V57MWQgllrfQ\nISKn2nZ3uLSq4R7EyzEQIlAUlFaJw5UJDNFpI6R3faShUG+kJXdXibjey2JjpdN3\n1/CHJ3C2yVQR4zoBMPR7r5tlexdGUa228e+/gadFl/aY4ESAbXiJpG4jZGc7lAmd\n1Y4JHhjayiJhtKj8cgO0KDuna+Pxh+RkWAyO7nOUMfRqY7QuDMapM6d/dMetZbz4\nyMTPZWQi317HZ1racD0omr/siCS0JCbjjedpyz85yYnqKLE08gW9uB3p6gzdVtxN\nn8BaVyPtjbuezFUNFfkGS5MRuVYc6B9LAgMBAAGjZjBkMB0GA1UdDgQWBBS9u6Ea\n2J0Z3PKsZ6CLETBxMQV8jjAfBgNVHSMEGDAWgBTMI6hSlcDMBNJZH9huHeUWWU2s\n9jASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIBhjANBgkqhkiG9w0B\nAQsFAAOCAgEAjb0+EdZFnNHKvo0LhFHGqncCzv+O0X8uWtgHAx0p304sMWyOV2qe\ntHFiZtJ47M8Ru3jE82kL6Wxieich7N9s+CrdXJXR2Eh6loJDtNBP8nQIUTTIGSqe\nWnf4sqn2bw2puIA6C0D0PKPvq4BFt7Br/pxfRJ4fN3ksr9LtBqhy0qcfMmhC6qsb\njhWCROZwBnTXHcd65d1Np9mRnFTXemARX8x5EX7uNVq3wT93emfi37OkxZMRq9xK\nCMzZKuKZ2TGAprfAftba9upZmEN9rlWXT4mgEA29qebt2/Vn+QAA06BLY4dyPIgn\nrrRx5ogdRRsw3uStksc0ef1Nk/nGQEI+NcG/ZTV0fltf6c4SIMysQ/qDIshCUe5P\ntfypBO/kzNcseiZA6jGyVSGrKmSwjoyRdH7aT2PnymOMZ5Joce8jxD2TjrnieG0W\n63/p02qR48w2qkd3We+W1S4o2cZaS//o4xr4mxG6+/p9f8ubIDzfctS53hprQpmu\nEFxzSP2PPURazefDXy9nmxjHv3QjrBDc9qqI6KhnegGETB+Aio+EEKA/0npLDtF1\nSPHgaFG27p1UqRJNS+H7S9C0jXCEjZPNIfn4P42JGiCl8tFAXRBcHI5+7FiRGaGz\nrwg2KJfv9Rg3Z32y7lrIdgbqEsyYove0d6TpQACp2VRRXjn+H0l1yc8=\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----\nMIIGCDCCA/CgAwIBAgIJAIKsMAZuH8qDMA0GCSqGSIb3DQEBCwUAMIGQMQswCQYD\nVQQGEwJJTjELMAkGA1UECAwCTUgxDTALBgNVBAcMBFBVTkUxDzANBgNVBAoMBlRS\nSUxJTzELMAkGA1UECwwCSVQxGjAYBgNVBAMMESoudHJpbGlvZGF0YS5kZW1vMSsw\nKQYJKoZIhvcNAQkBFhxwcmFzaGFudC5zYWtoYXJrYXJAdHJpbGlvLmlvMB4XDTE5\nMDYxMzA4NTQyOFoXDTM5MDYwODA4NTQyOFowgZAxCzAJBgNVBAYTAklOMQswCQYD\nVQQIDAJNSDENMAsGA1UEBwwEUFVORTEPMA0GA1UECgwGVFJJTElPMQswCQYDVQQL\nDAJJVDEaMBgGA1UEAwwRKi50cmlsaW9kYXRhLmRlbW8xKzApBgkqhkiG9w0BCQEW\nHHByYXNoYW50LnNha2hhcmthckB0cmlsaW8uaW8wggIiMA0GCSqGSIb3DQEBAQUA\nA4ICDwAwggIKAoICAQDUQzq9ki4L5/QhgJtyUQXTli/WyYlXF6TqYbVUkl/N4AE0\nQkfwAPFz+wWW3WDY1xAUIuQMkmf8V4SnCA+zD9cQvTCsB4ScBejknvQiV275o9TH\nDCyUxRuuVDTQ9q0tLQUOLa4RH/ytbVwdQ9+G1jU3elqQfGCpQwO9ZCHSXwypmVJW\nplgRqrq1FGx2fjgchTawSIrE0E2Wtd4rUaYG+jx6gD3TnrzDuapsTSaBjyc9bJRm\neEJvkde/q8G94qaxuAk+UQelYoR+Pk1JSS8OILloG6R5TQJQf5o4DEmvZbv/kaCi\nAA7e6kyYhZ8dT1gi8ux965c1fIDZH1e4Qm30KCbJ6pGYfaQq9UlzZLggH+EFbXQM\nrGZwWomckCIIKumWNFFtJ9BpirMjm4TjhNZnS9EmjUQC41eBX/3bvj5QnG1PnnPA\n87CnKJEXlTEWVtdz3G+XuH4qvbeW/pmV4hpQ/lmkidVMNIfYtnTcW0Qd7HG4oczb\nBETjCibFyMJndyIhJDTmvhrEEfLmJbm4P2OZ6Yjb+yd+eqJJhcCvfS31J6Ex2kMb\nxJD9MOygDrtdjLUSlpVdJTA6eSEHgbGUDoBv5wPe/bxot8ccdGyWj5Ch5EGUxJRQ\n3ZvsmNq2e8y0rIa/MDh4MICNSNM+lVoEYeaeuqLN+Ml18yZQLy/mf44C2A5OxQID\nAQABo2MwYTAdBgNVHQ4EFgQUzCOoUpXAzATSWR/Ybh3lFllNrPYwHwYDVR0jBBgw\nFoAUzCOoUpXAzATSWR/Ybh3lFllNrPYwDwYDVR0TAQH/BAUwAwEB/zAOBgNVHQ8B\nAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAMX4TVDmrT9NzkmKh6Pnn6jX7lft\nlpU+WewMMs97Vdwd8lnAn9lpBP9q0xyAVtJpmcPVHc6NlQBazf5nqhx2u9/LUPNP\nzdYRz7X/xu71ePzX7UCh+s4kftf/Hokwi4jF/QtnmRvFRp7Y8+OIEf0sz6jkW552\nhj43UTFDLpYWdfCNeBH+j9RjzWJHKdvRwEPzpmYp/KbgBagerp8BSQqEBc7sQMXw\nr0Wyip3FaKEon+NMMavrFnNcQALMG68IZf4CnF9X2MSUMTfZj86KiPcpwbbfSRwU\nRFL7Ia7uX9+UxewAJdcjNVpERhTHu0ucFA5Ea56sLK/nd5kg5Or1d5noeTODhAFu\nSAcT3yblzxoXoV1+pvm7PslMVWd+P/zxwucaLb4ll5BZWml7xZAgc/KIwnkyU+Yg\nyX//RN8REGUAPYsi0LkrOAJubmI1Tbr8cgmsxG2kCPMyoyKpM3AociW7mHneu6EX\nPIiLWm87o+dbeoPNibTkNBqN6uGpHGxspEma/r87fUiMsjj75NxvGw8D+NpynOIf\nD6tmcLSXaJrZ+PXkX2iqss+iM4Y5FHWHlTVcqZ4kcrqNcOtO0SUtpZKCk7uZVJpa\nmQiHr3IX9CMdkelwAgHOZUchA9gzz5vihg5ASrCLShdwidjsdeqqSWMHEFVU+A+84Yg4\n+BWLCdjemwkeb\n-----END CERTIFICATE-----\n",
            "s3-bucket-object-lock-enabled": false
          },
          {
            "backup-target-name": "NFS_BT3",
            "backup-target-type": "nfs",
            "is-default": false,
            "nfs-shares": "192.2.1.33:/var/nsfshare1",
            "nfs-options": "nolock,soft,timeo=600,intr,lookupcache=none,nfsvers=3,retrans=10"
          }
        ]
      verbose: True
      trustee-role: creator,member
    to:
      - 'lxd:1'
relations:
  # Triliovault horizon plugin relations
  # # relation with openstack-dashboard
  - - trilio-horizon-plugin:dashboard-plugin
    - openstack-dashboard:dashboard-plugin

  # Triliovault Datamover-API relations
  # # relation with keystone
  - - trilio-dm-api:identity-service
    - keystone:identity-service
  # # relation with db router
  - - trilio-dm-api:shared-db
    - trilio-dm-api-mysql-router:shared-db
  # # relation with AMQP server
  - - trilio-dm-api:amqp
    - rabbitmq-server:amqp
  # # relation with vault certificates
  - - trilio-dm-api:certificates
    - vault:certificates
  # # relation with DB server from the router
  - - trilio-dm-api-mysql-router:db-router
    - mysql-innodb-cluster:db-router

  # Triliovault Datamover relations
  # # relation with AMQP server
  - - trilio-data-mover:amqp
    - rabbitmq-server:amqp
  # # relation with nova-compute for sub-ordinating
  - - trilio-data-mover:juju-info
    - nova-compute:juju-info
  # # relation with db router
  - - trilio-data-mover:shared-db
    - trilio-data-mover-mysql-router:shared-db
  # # relation with CEPH
  - - trilio-data-mover:ceph
    - ceph-mon:client
  # # relation with DB server from the router
  - - trilio-data-mover-mysql-router:db-router
    - mysql-innodb-cluster:db-router
  # # A workaround for db router to work for trilio-datamover
  - - nova-compute:juju-info
    - trilio-data-mover-mysql-router:juju-info

  # Triliovault Workloadmgr relations
  # # relation with db router
  - - trilio-wlm:shared-db
    - trilio-wlm-mysql-router:shared-db
  # # relation with AMQP server
  - - trilio-wlm:amqp
    - rabbitmq-server:amqp
  # # relation with keystone
  - - trilio-wlm:identity-service
    - keystone:identity-service
  # # relation with vault certificates
  - - trilio-wlm:certificates
    - vault:certificates
  # # relation with DB server from the router
  - - mysql-innodb-cluster:db-router
    - trilio-wlm-mysql-router:db-router

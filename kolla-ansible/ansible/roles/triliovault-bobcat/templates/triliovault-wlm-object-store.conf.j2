[DEFAULT]
{% if triliovault_backup_target == "nfs" %}

vault_storage_type = nfs

{% if multi_ip_nfs_enabled == "yes" %}
vault_storage_nfs_export = "{{ triliovault_nfs_map[inventory_hostname] }}"
{% else %}
vault_storage_nfs_export = {{ triliovault_nfs_shares }}
{% endif %}

vault_storage_nfs_options = {{ triliovault_nfs_options }}

{% elif triliovault_backup_target == "amazon_s3" %}

vault_storage_type = s3
vault_storage_nfs_export = TrilioVault
vault_s3_auth_version = DEFAULT
vault_s3_access_key_id = {{ triliovault_s3_access_key }}
vault_s3_secret_access_key = {{ triliovault_s3_secret_key }}
vault_s3_region_name = {{ triliovault_s3_region_name }}
vault_s3_bucket = {{ triliovault_s3_bucket_name }}
vault_s3_signature_version = {{ triliovault_s3_version }}
{# vault_s3_auth_version = {{ triliovault_s3_auth_version }} #}
vault_s3_ssl_cert =
vault_s3_ssl_verify = {{ triliovault_s3_ssl_verify }}

{% elif triliovault_backup_target == "other_s3_compatible" %}

vault_storage_type = s3
vault_storage_nfs_export = TrilioVault
vault_s3_auth_version = DEFAULT
vault_s3_access_key_id = {{ triliovault_s3_access_key }}
vault_s3_secret_access_key = {{ triliovault_s3_secret_key }}
vault_s3_region_name = {{ triliovault_s3_region_name }}
vault_s3_bucket = {{ triliovault_s3_bucket_name }}
vault_s3_endpoint_url = {{ triliovault_s3_endpoint_url }}
vault_s3_signature_version = {{ triliovault_s3_version }}
{# vault_s3_auth_version = {{ triliovault_s3_auth_version }} #}
vault_s3_ssl = {{ triliovault_s3_ssl_enabled }}
vault_s3_ssl_cert = /etc/triliovault-wlm/{{ triliovault_s3_ssl_cert_file_name }}
vault_s3_ssl_verify = {{ triliovault_s3_ssl_verify }}

{% endif %}

vault_data_directory_old = /var/triliovault
vault_data_directory = {{ triliovault_parent_data_directory }}/triliovault-mounts

log_config_append = /etc/triliovault-object-store/object_store_logging.conf

verbose = True
vault_s3_max_pool_connections = 500

[s3fuse_sys_admin]
helper_command = sudo /usr/bin/workloadmgr-rootwrap /etc/triliovault-wlm/rootwrap.conf privsep-helper
